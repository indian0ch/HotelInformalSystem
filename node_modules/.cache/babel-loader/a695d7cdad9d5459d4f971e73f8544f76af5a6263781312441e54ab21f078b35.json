{"ast":null,"code":"import _regeneratorRuntime from\"/Users/andreyfesiuk/Desktop/\\u041A\\u0443\\u0440\\u0441\\u043E\\u0432\\u0430 \\u041E\\u041E\\u041F/HotelInformalSystem/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/andreyfesiuk/Desktop/\\u041A\\u0443\\u0440\\u0441\\u043E\\u0432\\u0430 \\u041E\\u041E\\u041F/HotelInformalSystem/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/andreyfesiuk/Desktop/\\u041A\\u0443\\u0440\\u0441\\u043E\\u0432\\u0430 \\u041E\\u041E\\u041F/HotelInformalSystem/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useRef}from\"react\";import styles from\"./Payments.module.css\";import{PaymentFactory}from\"./PaymentsFactoryMethod.ts\";import Button from\"../UI/Button/Button\";import{getGuests,modifyGuest}from\"../../classes/Guest.ts\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Payments=function Payments(props){var userId=useRef();var userSumInput=useRef();var payPalName=useRef();var payPalPass=useRef();var cardNumber=useRef();var cardExpiration=useRef();var cardCvv=useRef();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),userDoubt=_useState2[0],setUserDoubt=_useState2[1];var _useState3=useState(\"Cash\"),_useState4=_slicedToArray(_useState3,2),selectedMethod=_useState4[0],setSelectedMethod=_useState4[1];var guestObj;function onChangeSelecterHandler(event){setSelectedMethod(event.target.value);}function onClickCheckHandler(_x){return _onClickCheckHandler.apply(this,arguments);}function _onClickCheckHandler(){_onClickCheckHandler=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();_context.next=3;return getGuests().then(function(guestsArr){return guestsArr.filter(function(guest){return guest.id==userId.current.value;});});case 3:guestObj=_context.sent;if(guestObj.length!==0){alert(guestObj[0].priceService);setUserDoubt(guestObj[0].priceService);}else{alert(\"Гостя з таким паспортним номером не знайдено!\");}case 5:case\"end\":return _context.stop();}},_callee);}));return _onClickCheckHandler.apply(this,arguments);}function onClickPayHandler(_x2){return _onClickPayHandler.apply(this,arguments);}function _onClickPayHandler(){_onClickPayHandler=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(event){var userSum,paymentFactory,payments;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:event.preventDefault();userSum=userSumInput.current.value;paymentFactory=new PaymentFactory();payments=paymentFactory.createPayment(selectedMethod,{cardNumber:cardNumber.current.value,cardExpiration:cardExpiration.current.value,cardCvv:cardCvv.current.value,payPalName:payPalName.current.value,payPalPass:payPalPass.current.value});payments.pay(userSum);if(!(userSum-userDoubt>=0)){_context2.next=10;break;}_context2.next=8;return modifyGuest(userId.current.value,0);case 8:_context2.next=12;break;case 10:_context2.next=12;return modifyGuest(userId.current.value,userDoubt-userSum);case 12:case\"end\":return _context2.stop();}},_callee2);}));return _onClickPayHandler.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:styles.paymentsContainer,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Payments section\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"idUser\",children:\"Your passport id:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"idUser\",ref:userId}),/*#__PURE__*/_jsx(Button,{onClick:onClickCheckHandler,children:\"View check\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Check:\",userDoubt,\"$\"]}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"sumUser\",children:\"Enter sum:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"sumUser\",ref:userSumInput}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"select\",{name:\"paymentsUser\",className:styles.sectionBox,onChange:onChangeSelecterHandler,children:[/*#__PURE__*/_jsx(\"option\",{value:\"Cash\",children:\"Cash\"}),/*#__PURE__*/_jsx(\"option\",{value:\"PayPal\",children:\"PayPal\"}),/*#__PURE__*/_jsx(\"option\",{value:\"MonoPay\",children:\"MonoPay\"})]})}),selectedMethod===\"PayPal\"&&/*#__PURE__*/_jsxs(\"div\",{children:[\" \",/*#__PURE__*/_jsx(\"label\",{htmlFor:\"paypalUser\",children:\"Enter PayPal username:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"paypalUser\",ref:payPalName}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"paypalPass\",children:\"Enter PayPal password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"paypalPass\",ref:payPalPass})]}),selectedMethod===\"MonoPay\"&&/*#__PURE__*/_jsxs(\"div\",{children:[\" \",/*#__PURE__*/_jsx(\"label\",{htmlFor:\"cardNumber\",children:\"Enter card's number:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"cardNumber\",ref:cardNumber}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"cardExpiration\",children:\"Enter card's expiration:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"cardExpiration\",ref:cardExpiration}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"cardPass\",children:\"Enter card's cvv:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"cardPass\",ref:cardCvv})]}),/*#__PURE__*/_jsx(Button,{onClick:onClickPayHandler,children:\"Pay\"})]})]});};export default Payments;","map":{"version":3,"names":["React","useState","useRef","styles","PaymentFactory","Button","getGuests","modifyGuest","jsx","_jsx","jsxs","_jsxs","Payments","props","userId","userSumInput","payPalName","payPalPass","cardNumber","cardExpiration","cardCvv","_useState","_useState2","_slicedToArray","userDoubt","setUserDoubt","_useState3","_useState4","selectedMethod","setSelectedMethod","guestObj","onChangeSelecterHandler","event","target","value","onClickCheckHandler","_x","_onClickCheckHandler","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","preventDefault","then","guestsArr","filter","guest","id","current","sent","length","alert","priceService","stop","onClickPayHandler","_x2","_onClickPayHandler","_callee2","userSum","paymentFactory","payments","_callee2$","_context2","createPayment","pay","className","paymentsContainer","children","htmlFor","type","name","ref","onClick","sectionBox","onChange"],"sources":["/Users/andreyfesiuk/Desktop/Курсова ООП/HotelInformalSystem/src/components/Payments/Payments.js"],"sourcesContent":["import React, { useState, useRef } from \"react\";\nimport styles from \"./Payments.module.css\";\nimport { PaymentFactory } from \"./PaymentsFactoryMethod.ts\";\nimport Button from \"../UI/Button/Button\";\nimport { getGuests, modifyGuest } from \"../../classes/Guest.ts\";\n\nconst Payments = (props) => {\n  const userId = useRef();\n  const userSumInput = useRef();\n  const payPalName = useRef();\n  const payPalPass = useRef();\n  const cardNumber = useRef();\n  const cardExpiration = useRef();\n  const cardCvv = useRef();\n  const [userDoubt, setUserDoubt] = useState(\"\");\n  const [selectedMethod, setSelectedMethod] = useState(\"Cash\");\n  let guestObj;\n\n  function onChangeSelecterHandler(event) {\n    setSelectedMethod(event.target.value);\n  }\n  async function onClickCheckHandler(event) {\n    event.preventDefault();\n    guestObj = await getGuests().then((guestsArr) => {\n      return guestsArr.filter((guest) => guest.id == userId.current.value);\n    });\n\n    if (guestObj.length !== 0) {\n      alert(guestObj[0].priceService);\n      setUserDoubt(guestObj[0].priceService);\n    } else {\n      alert(\"Гостя з таким паспортним номером не знайдено!\");\n    }\n  }\n  async function onClickPayHandler(event) {\n    event.preventDefault();\n    const userSum = userSumInput.current.value;\n    let paymentFactory = new PaymentFactory();\n\n    let payments = paymentFactory.createPayment(selectedMethod, {\n      cardNumber: cardNumber.current.value,\n      cardExpiration: cardExpiration.current.value,\n      cardCvv: cardCvv.current.value,\n      payPalName: payPalName.current.value,\n      payPalPass: payPalPass.current.value,\n    });\n\n    payments.pay(userSum);\n\n    if (userSum - userDoubt >= 0) {\n      await modifyGuest(userId.current.value, 0);\n    } else {\n      await modifyGuest(userId.current.value, userDoubt - userSum);\n    }\n  }\n\n  return (\n    <div className={styles.paymentsContainer}>\n      <h2>Payments section</h2>\n      <label htmlFor=\"idUser\">Your passport id:</label>\n      <input type=\"text\" name=\"idUser\" ref={userId}></input>\n      <Button onClick={onClickCheckHandler}>View check</Button>\n      <p>Check:{userDoubt}$</p>\n      <form>\n        <label htmlFor=\"sumUser\">Enter sum:</label>\n        <input type=\"text\" name=\"sumUser\" ref={userSumInput}></input>\n        <div>\n          <select\n            name=\"paymentsUser\"\n            className={styles.sectionBox}\n            onChange={onChangeSelecterHandler}\n          >\n            <option value=\"Cash\">Cash</option>\n            <option value=\"PayPal\">PayPal</option>\n            <option value=\"MonoPay\">MonoPay</option>\n          </select>\n        </div>\n        {selectedMethod === \"PayPal\" && (\n          <div>\n            {\" \"}\n            <label htmlFor=\"paypalUser\">Enter PayPal username:</label>\n            <input type=\"text\" name=\"paypalUser\" ref={payPalName}></input>\n            <label htmlFor=\"paypalPass\">Enter PayPal password:</label>\n            <input type=\"password\" name=\"paypalPass\" ref={payPalPass}></input>\n          </div>\n        )}\n        {selectedMethod === \"MonoPay\" && (\n          <div>\n            {\" \"}\n            <label htmlFor=\"cardNumber\">Enter card's number:</label>\n            <input type=\"text\" name=\"cardNumber\" ref={cardNumber}></input>\n            <label htmlFor=\"cardExpiration\">Enter card's expiration:</label>\n            <input\n              type=\"password\"\n              name=\"cardExpiration\"\n              ref={cardExpiration}\n            ></input>\n            <label htmlFor=\"cardPass\">Enter card's cvv:</label>\n            <input type=\"password\" name=\"cardPass\" ref={cardCvv}></input>\n          </div>\n        )}\n        <Button onClick={onClickPayHandler}>Pay</Button>\n      </form>\n    </div>\n  );\n};\nexport default Payments;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}