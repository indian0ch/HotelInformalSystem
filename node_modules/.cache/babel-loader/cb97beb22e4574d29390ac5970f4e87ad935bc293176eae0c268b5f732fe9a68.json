{"ast":null,"code":"import _regeneratorRuntime from\"/Users/andreyfesiuk/Desktop/\\u041A\\u0443\\u0440\\u0441\\u043E\\u0432\\u0430 \\u041E\\u041E\\u041F/HotelInformalSystem/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/andreyfesiuk/Desktop/\\u041A\\u0443\\u0440\\u0441\\u043E\\u0432\\u0430 \\u041E\\u041E\\u041F/HotelInformalSystem/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/andreyfesiuk/Desktop/\\u041A\\u0443\\u0440\\u0441\\u043E\\u0432\\u0430 \\u041E\\u041E\\u041F/HotelInformalSystem/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/andreyfesiuk/Desktop/\\u041A\\u0443\\u0440\\u0441\\u043E\\u0432\\u0430 \\u041E\\u041E\\u041F/HotelInformalSystem/node_modules/@babel/runtime/helpers/esm/createClass.js\";//Передбачається функція реєстрації/логіну для персоналу готелю з метою входу у свій особистий кабінет - Pattern Одинак[Proxy]\n//Transfers the registration/login function for hotel staff with land access to their personal account - Pattern [Proxy]\nimport{getWorkerById}from\"../../classes/Employee.ts\";var urlJsonEmployee=\"http://localhost:4000/workers\";var urlJsonServer=\"http://localhost:4000\";export var ProxyService=/*#__PURE__*/function(){function ProxyService(authService){_classCallCheck(this,ProxyService);this.authService=void 0;this.status=void 0;this.authService=authService;}_createClass(ProxyService,[{key:\"checkAccess\",value:function(){var _checkAccess=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _this=this;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(urlJsonServer).then(function(response){if(response.ok){_this.status=true;}else{_this.status=false;}}).catch(function(error){console.log(\"Error:\",error.message);alert(\"JSON server is not running! Check errors in console\");});case 2:case\"end\":return _context.stop();}},_callee);}));function checkAccess(){return _checkAccess.apply(this,arguments);}return checkAccess;}()},{key:\"login\",value:function(){var _login=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(workerId,name){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.checkAccess();case 2:if(!(this.status===true)){_context2.next=7;break;}_context2.next=5;return this.authService.login(workerId,name);case 5:_context2.next=8;break;case 7:alert(\"No response from database)\");case 8:case\"end\":return _context2.stop();}},_callee2,this);}));function login(_x,_x2){return _login.apply(this,arguments);}return login;}()},{key:\"getStatus\",value:function getStatus(){return this.authService.getStatus();}},{key:\"logout\",value:function logout(){this.authService.logout();}}]);return ProxyService;}();// Authentication service\nexport var AuthenticationService=/*#__PURE__*/function(){function AuthenticationService(){_classCallCheck(this,AuthenticationService);this.status=void 0;this.status=false;}_createClass(AuthenticationService,[{key:\"login\",value:function(){var _login2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(workerId,name){var workerObject;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return getWorkerById(workerId).then(function(employee){return employee;});case 2:workerObject=_context3.sent;console.log(workerObject);if(workerObject.length!==0){if(workerObject[0].status===true&&workerObject[0].position===\"manager\"){alert(\"Manager \\\"\".concat(name,\"\\\" logged in successfully!\"));this.status=true;}else{alert(\"Manager with such username do not found!\");}}else{alert(\"Manager with such username do not found!\");}console.log(this.status);case 6:case\"end\":return _context3.stop();}},_callee3,this);}));function login(_x3,_x4){return _login2.apply(this,arguments);}return login;}()},{key:\"getStatus\",value:function getStatus(){return this.status;}},{key:\"logout\",value:function logout(){alert(\"Manager logged out successfully!\");this.status=false;}}]);return AuthenticationService;}();","map":{"version":3,"names":["getWorkerById","urlJsonEmployee","urlJsonServer","ProxyService","authService","_classCallCheck","status","_createClass","key","value","_checkAccess","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_this","wrap","_callee$","_context","prev","next","fetch","then","response","ok","catch","error","console","log","message","alert","stop","checkAccess","apply","arguments","_login","_callee2","workerId","name","_callee2$","_context2","login","_x","_x2","getStatus","logout","AuthenticationService","_login2","_callee3","workerObject","_callee3$","_context3","employee","sent","length","position","concat","_x3","_x4"],"sources":["/Users/andreyfesiuk/Desktop/Курсова ООП/HotelInformalSystem/src/components/Authentication/AuthenticationProxy.ts"],"sourcesContent":["//Передбачається функція реєстрації/логіну для персоналу готелю з метою входу у свій особистий кабінет - Pattern Одинак[Proxy]\n//Transfers the registration/login function for hotel staff with land access to their personal account - Pattern [Proxy]\nimport { Employee, getWorkerById } from \"../../classes/Employee.ts\";\nconst urlJsonEmployee = \"http://localhost:4000/workers\";\nconst urlJsonServer = \"http://localhost:4000\";\n\ninterface Services {\n  login(workerId: number, name: string): void;\n  logout(): void;\n}\nexport class ProxyService implements Services {\n  private authService: AuthenticationService;\n  private status: boolean;\n\n  constructor(authService: AuthenticationService) {\n    this.authService = authService;\n  }\n\n  private async checkAccess() {\n    await fetch(urlJsonServer)\n      .then((response) => {\n        if (response.ok) {\n          this.status = true;\n        } else {\n          this.status = false;\n        }\n      })\n      .catch((error) => {\n        console.log(\"Error:\", error.message);\n        alert(\"JSON server is not running! Check errors in console\");\n      });\n  }\n\n  public async login(workerId: number, name: string) {\n    await this.checkAccess();\n    if (this.status === true) {\n      await this.authService.login(workerId, name);\n    } else {\n      alert(\"No response from database)\");\n    }\n  }\n\n  public getStatus() {\n    return this.authService.getStatus();\n  }\n\n  public logout(): void {\n    this.authService.logout();\n  }\n}\n// Authentication service\nexport class AuthenticationService implements Services {\n  private status: boolean;\n\n  constructor() {\n    this.status = false;\n  }\n\n  public async login(workerId: number, name: string) {\n    let workerObject = await getWorkerById(workerId).then((employee) => {\n      return employee;\n    });\n    console.log(workerObject);\n    if (workerObject.length !== 0) {\n      if (\n        workerObject[0].status === true &&\n        workerObject[0].position === \"manager\"\n      ) {\n        alert(`Manager \"${name}\" logged in successfully!`);\n        this.status = true;\n      } else {\n        alert(`Manager with such username do not found!`);\n      }\n    } else {\n      alert(`Manager with such username do not found!`);\n    }\n    console.log(this.status);\n  }\n\n  public getStatus() {\n    return this.status;\n  }\n\n  public logout(): void {\n    alert(`Manager logged out successfully!`);\n    this.status = false;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}