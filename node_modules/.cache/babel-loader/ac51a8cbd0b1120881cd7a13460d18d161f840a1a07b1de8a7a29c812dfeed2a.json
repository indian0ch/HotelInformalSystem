{"ast":null,"code":"//Функція оцінки клієнтами якості обслуговування по шкалі 0/10 - Pattern Спостерігач\nconst urlJsonReviews = \"http://localhost:4000/reviews\";\n//Subscribes\n\nexport class ResidentReviews {\n  constructor(nameres, text) {\n    this.nameres = void 0;\n    this.satisfactionLevel = void 0;\n    this.textReview = void 0;\n    this.administrationName = void 0;\n    this.nameres = nameres;\n    this.textReview = text;\n    this.administrationName = [];\n  }\n  get nameResident() {\n    return this.nameres;\n  }\n  get satisfactionLevelGet() {\n    return this.satisfactionLevel;\n  }\n  get textRevieGet() {\n    return this.textReview;\n  }\n  set SatisfactionLevelSet(value) {\n    this.satisfactionLevel = value;\n    this.notify();\n  }\n  attach(observer) {\n    this.administrationName.push(observer);\n  }\n  detach(observer) {\n    const index = this.administrationName.indexOf(observer);\n    if (index !== -1) {\n      this.administrationName.splice(index, 1);\n    }\n  }\n  addReview(concreteSubject, administrationName) {\n    fetch(urlJsonReviews, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        nameres: concreteSubject.nameResident,\n        satisfactionLevel: concreteSubject.satisfactionLevelGet,\n        textReview: concreteSubject.textRevieGet,\n        ListAdmins: administrationName\n      })\n    }).then(response => response.json()).then(concreteSubject => {\n      window.alert(\"Review added to a database!\");\n    }).catch(error => {\n      console.error(error);\n    });\n  }\n  notify() {\n    for (const observer of this.administrationName) {\n      observer.update(this);\n    }\n  }\n}\n\n//declare the update method used by subjects\n\nexport class HotelAdministration {\n  constructor() {\n    let observerName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'Vlad';\n    this.administrationName = void 0;\n    this.administrationName = observerName;\n  }\n  update(subject) {\n    if (subject instanceof ResidentReviews) {\n      const concreteSubject = subject;\n      console.log(concreteSubject);\n      concreteSubject.addReview(concreteSubject, this.administrationName);\n      // if (concreteSubject.SatisfactionLevelGet >= 4) {\n      //   alert(`Адміністратор ${this.administrationName} отримав оцінку від користувача ${concreteSubject.nameResident} стосовно якості обслуговування готелю. Оцінка: ${concreteSubject.SatisfactionLevelGet}. Адміністратор ${this.administrationName} задоволений результатом роботи готелю і вдячний ${concreteSubject.nameResident} за хорошу оцінку!`);\n      // } else {\n      //   alert(`Адміністратор ${this.administrationName} отримав оцінку від користувача ${concreteSubject.nameResident} стосовно якості обслуговування готелю. Оцінка: ${concreteSubject.SatisfactionLevelGet}. Адміністратор ${this.administrationName} просить ${concreteSubject.nameResident} прийняти вибачення і пообіцяв виправити ситуацію!`);\n      // }\n    }\n  }\n}","map":{"version":3,"names":["urlJsonReviews","ResidentReviews","constructor","nameres","text","satisfactionLevel","textReview","administrationName","nameResident","satisfactionLevelGet","textRevieGet","SatisfactionLevelSet","value","notify","attach","observer","push","detach","index","indexOf","splice","addReview","concreteSubject","fetch","method","headers","body","JSON","stringify","ListAdmins","then","response","json","window","alert","catch","error","console","update","HotelAdministration","observerName","arguments","length","undefined","subject","log"],"sources":["/Users/andreyfesiuk/Desktop/Курсова ООП/HotelInformalSystem/src/components/Review/ReviewObserver.ts"],"sourcesContent":["//Функція оцінки клієнтами якості обслуговування по шкалі 0/10 - Pattern Спостерігач\nconst urlJsonReviews=\"http://localhost:4000/reviews\";\n//Subscribes\nexport interface ISubject {\n  attach(observer: IObserver): void;\n  detach(observer: IObserver): void;\n  notify(): void;\n}\n\nexport class ResidentReviews implements ISubject {\n  private nameres: string;\n  private satisfactionLevel: number;\n  private textReview:string;\n  public administrationName: IObserver[];\n\n  constructor(nameres: string,text:string) {\n    this.nameres = nameres;\n    this.textReview=text;\n    this.administrationName = [];\n  }\n\n  public get nameResident(): string {\n    return this.nameres;\n  }\n\n  public get satisfactionLevelGet(): number {\n    return this.satisfactionLevel;\n  }\n  public get textRevieGet(): string {\n    return this.textReview;\n  }\n  public set SatisfactionLevelSet(value: number) {\n    this.satisfactionLevel = value;\n    this.notify();\n  }\n\n  public attach(observer: IObserver) {\n    this.administrationName.push(observer);\n  }\n\n  public detach(observer: IObserver) {\n    const index = this.administrationName.indexOf(observer);\n    if (index !== -1) {\n      this.administrationName.splice(index, 1);\n    }\n  }\n\n  public addReview(concreteSubject:ResidentReviews,administrationName:string){\n     fetch(urlJsonReviews, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        nameres: concreteSubject.nameResident,\n        satisfactionLevel: concreteSubject.satisfactionLevelGet,\n        textReview: concreteSubject.textRevieGet,\n        ListAdmins: administrationName\n      }),\n    })\n      .then((response) => response.json())\n      .then((concreteSubject: ResidentReviews) => {\n        window.alert(\"Review added to a database!\");\n      })\n      .catch((error) => {\n        console.error(error);\n      });\n  }\n\n  public notify() {\n    for (const observer of this.administrationName) {\n      observer.update(this);\n    }\n  }\n}\n\n//declare the update method used by subjects\nexport interface IObserver {\n  update(subject: ISubject): void;\n}\n\nexport class HotelAdministration implements IObserver {\n  private administrationName: string;\n\n  constructor(observerName: string='Vlad') {\n    this.administrationName = observerName;\n  }\n\n  public update(subject: ISubject) {\n    if (subject instanceof ResidentReviews) {\n      const concreteSubject: ResidentReviews = subject;\n      console.log(concreteSubject);\n      concreteSubject.addReview(concreteSubject,this.administrationName);\n      // if (concreteSubject.SatisfactionLevelGet >= 4) {\n      //   alert(`Адміністратор ${this.administrationName} отримав оцінку від користувача ${concreteSubject.nameResident} стосовно якості обслуговування готелю. Оцінка: ${concreteSubject.SatisfactionLevelGet}. Адміністратор ${this.administrationName} задоволений результатом роботи готелю і вдячний ${concreteSubject.nameResident} за хорошу оцінку!`);\n      // } else {\n      //   alert(`Адміністратор ${this.administrationName} отримав оцінку від користувача ${concreteSubject.nameResident} стосовно якості обслуговування готелю. Оцінка: ${concreteSubject.SatisfactionLevelGet}. Адміністратор ${this.administrationName} просить ${concreteSubject.nameResident} прийняти вибачення і пообіцяв виправити ситуацію!`);\n      // }\n    }\n  }\n}\n\n"],"mappings":"AAAA;AACA,MAAMA,cAAc,GAAC,+BAA+B;AACpD;;AAOA,OAAO,MAAMC,eAAe,CAAqB;EAM/CC,WAAWA,CAACC,OAAe,EAACC,IAAW,EAAE;IAAA,KALjCD,OAAO;IAAA,KACPE,iBAAiB;IAAA,KACjBC,UAAU;IAAA,KACXC,kBAAkB;IAGvB,IAAI,CAACJ,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACG,UAAU,GAACF,IAAI;IACpB,IAAI,CAACG,kBAAkB,GAAG,EAAE;EAC9B;EAEA,IAAWC,YAAYA,CAAA,EAAW;IAChC,OAAO,IAAI,CAACL,OAAO;EACrB;EAEA,IAAWM,oBAAoBA,CAAA,EAAW;IACxC,OAAO,IAAI,CAACJ,iBAAiB;EAC/B;EACA,IAAWK,YAAYA,CAAA,EAAW;IAChC,OAAO,IAAI,CAACJ,UAAU;EACxB;EACA,IAAWK,oBAAoBA,CAACC,KAAa,EAAE;IAC7C,IAAI,CAACP,iBAAiB,GAAGO,KAAK;IAC9B,IAAI,CAACC,MAAM,CAAC,CAAC;EACf;EAEOC,MAAMA,CAACC,QAAmB,EAAE;IACjC,IAAI,CAACR,kBAAkB,CAACS,IAAI,CAACD,QAAQ,CAAC;EACxC;EAEOE,MAAMA,CAACF,QAAmB,EAAE;IACjC,MAAMG,KAAK,GAAG,IAAI,CAACX,kBAAkB,CAACY,OAAO,CAACJ,QAAQ,CAAC;IACvD,IAAIG,KAAK,KAAK,CAAC,CAAC,EAAE;MAChB,IAAI,CAACX,kBAAkB,CAACa,MAAM,CAACF,KAAK,EAAE,CAAC,CAAC;IAC1C;EACF;EAEOG,SAASA,CAACC,eAA+B,EAACf,kBAAyB,EAAC;IACxEgB,KAAK,CAACvB,cAAc,EAAE;MACrBwB,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACP,cAAc,EAAE;MAClB,CAAC;MACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QACnBzB,OAAO,EAAEmB,eAAe,CAACd,YAAY;QACrCH,iBAAiB,EAAEiB,eAAe,CAACb,oBAAoB;QACvDH,UAAU,EAAEgB,eAAe,CAACZ,YAAY;QACxCmB,UAAU,EAAEtB;MACd,CAAC;IACH,CAAC,CAAC,CACCuB,IAAI,CAAEC,QAAQ,IAAKA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC,CACnCF,IAAI,CAAER,eAAgC,IAAK;MAC1CW,MAAM,CAACC,KAAK,CAAC,6BAA6B,CAAC;IAC7C,CAAC,CAAC,CACDC,KAAK,CAAEC,KAAK,IAAK;MAChBC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;IACtB,CAAC,CAAC;EACN;EAEOvB,MAAMA,CAAA,EAAG;IACd,KAAK,MAAME,QAAQ,IAAI,IAAI,CAACR,kBAAkB,EAAE;MAC9CQ,QAAQ,CAACuB,MAAM,CAAC,IAAI,CAAC;IACvB;EACF;AACF;;AAEA;;AAKA,OAAO,MAAMC,mBAAmB,CAAsB;EAGpDrC,WAAWA,CAAA,EAA8B;IAAA,IAA7BsC,YAAoB,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAC,MAAM;IAAA,KAF/BlC,kBAAkB;IAGxB,IAAI,CAACA,kBAAkB,GAAGiC,YAAY;EACxC;EAEOF,MAAMA,CAACM,OAAiB,EAAE;IAC/B,IAAIA,OAAO,YAAY3C,eAAe,EAAE;MACtC,MAAMqB,eAAgC,GAAGsB,OAAO;MAChDP,OAAO,CAACQ,GAAG,CAACvB,eAAe,CAAC;MAC5BA,eAAe,CAACD,SAAS,CAACC,eAAe,EAAC,IAAI,CAACf,kBAAkB,CAAC;MAClE;MACA;MACA;MACA;MACA;IACF;EACF;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}